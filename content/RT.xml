<?xml version="1.0" encoding="UTF-8"?>
<gate>
	<name>RT</name>
	<caption>Ростелеком</caption>
	<type>SMS</type>
	<class>HTTP</class>
	<version>10</version>
	<priority>10</priority>
	<country>Россия</country>
	<prefixlist>
		<prefix start="+7 351"/>
		<prefix start="+7 901265" end="+7 901269"/>
		<prefix start="+7 901954" end="+7 901955"/>
		<prefix start="+7 902150" end="+7 902151"/>
		<prefix start="+7 902155" end="+7 902156"/>
		<prefix start="+7 902188"/>
		<prefix start="+7 902253" end="+7 902279"/>
		<prefix start="+7 902400"/>
		<prefix start="+7 902409" end="+7 902410"/>
		<prefix start="+7 90244"/>
		<prefix start="+7 90247"/>
		<prefix start="+7 902500" end="+7 902503"/>
		<prefix start="+7 902509"/>
		<prefix start="+7 902583" end="+7 902587"/>
		<prefix start="+7 90260" end="+7 90264"/>
		<prefix start="+7 902690" end="+7 902694"/>
		<prefix start="+7 90279" end="+7 90280"/>
		<prefix start="+7 902812" end="+7 902820"/>
		<prefix start="+7 902824" end="+7 902839"/>
		<prefix start="+7 90285" end="+7 90286"/>
		<prefix start="+7 90289"/>
		<prefix start="+7 90445" end="+7 90449"/>
		<prefix start="+7 90480" end="+7 90481"/>
		<prefix start="+7 90484"/>
		<prefix start="+7 90487" end="+7 90488"/>
		<prefix start="+7 90493" end="+7 90494"/>
		<prefix start="+7 90800"/>
		<prefix start="+7 90807" end="+7 90809"/>
		<prefix start="+7 90824" end="+7 90827"/>
		<prefix start="+7 908497" end="+7 908499"/>
		<prefix start="+7 90881" end="+7 90883"/>
		<prefix start="+7 908852" end="+7 908899"/>
		<prefix start="+7 950440" end="+7 950564"/>
		<prefix start="+7 95123" end="+7 95127"/>
		<prefix start="+7 95143"/>
		<prefix start="+7 951920" end="+7 951996"/>
		<prefix start="+7 952315" end="+7 952349"/>
		<prefix start="+7 952640" end="+7 952664"/>
		<prefix start="+7 952670" end="+7 952724"/>
		<prefix start="+7 95382"/>

		<prefix start="+7 900315" end="+7 900334"/>
		<prefix start="+7 90204"/>
		<prefix start="+7 90221"/>
		<prefix start="+7 902230" end="+7 902234"/>
		<prefix start="+7 902287" end="+7 902288"/>
		<prefix start="+7 90230"/>
		<prefix start="+7 902666" end="+7 902669"/>
		<prefix start="+7 90268"/>
		<prefix start="+7 90278"/>
		<prefix start="+7 904240" end="+7 904244"/>
		<prefix start="+7 904263" end="+7 904269"/>
		<prefix start="+7 90466" end="+7 90467"/>
		<prefix start="+7 90476"/>
		<prefix start="+7 90478" end="+7 90479"/>
		<prefix start="+7 904850" end="+7 904855"/>
		<prefix start="+7 90490" end="+7 90492"/>
		<prefix start="+7 90830"/>
		<prefix start="+7 90854" end="+7 90855"/>
		<prefix start="+7 90872" end="+7 90876"/>
		<prefix start="+7 95031" end="+7 95032"/>
		<prefix start="+7 95034" end="+7 95037"/>
		<prefix start="+7 950945" end="+7 950949"/>
		<prefix start="+7 950969"/>
		<prefix start="+7 95105" end="+7 95106"/>
		<prefix start="+7 951298" end="+7 951299"/>
		<prefix start="+7 951340" end="+7 951343"/>
		<prefix start="+7 951357" end="+7 951359"/>
		<prefix start="+7 95188" end="+7 95191"/>
		<prefix start="+7 95202" end="+7 95204"/>
		<prefix start="+7 95207"/>
		<prefix start="+7 95219"/>
		<prefix start="+7 95246" end="+7 95247"/>

		<prefix start="+7 953010" end="+7 953034"/>
		<prefix start="+7 953400" end="+7 953410"/>
		<prefix start="+7 953413" end="+7 953415"/>
		<prefix start="+7 953444" end="+7 953447"/>
		<prefix start="+7 95348" end="+7 95349"/>
		<prefix start="+7 95363"/>
		<prefix start="+7 953975" end="+7 953989"/>

		<prefix start="7 902 00"/>
		<prefix start="7 902 120" end="7 902 123"/>
		<prefix start="7 902 125" end="7 902 129"/>
		<prefix start="7 902 244" end="7 902 246"/>
		<prefix start="7 902 355" end="7 902 357"/>
		<prefix start="7 902 582"/>
		<prefix start="7 902 588" end="7 902 589"/>
		<prefix start="7 904 18" end="7 904 19"/>
		<prefix start="7 908 470" end="7 908 491"/>
		<prefix start="7 951 09"/>
		<prefix start="7 8422"/>

		<prefix start="+7 902247" end="+7 902248"/>
		<prefix start="+7 902365" end="+7 902366"/>
		<prefix start="+7 908320" end="+7 908324"/>
		<prefix start="+7 95018"/>
		<prefix start="+7 95103"/>
		<prefix start="+7 95345"/>

		
	</prefixlist>
	<info>
		<maxsymbols>300</maxsymbols>
		<maxunicodesymbols>300</maxunicodesymbols>
		<supportflash>0</supportflash>
		<supportdtdelivery>0</supportdtdelivery>
		<supportunicode>1</supportunicode>
		<captcha>1</captcha>
		<gateurl>http://perm.rt.ru/#send-sms</gateurl>
	</info>
	<classprops>
		<encoding>UTF-8</encoding>
		<pageurl>http://perm.rt.ru/</pageurl>
		<imageurl>eval('http://rt.ru/captcha.png?rnd' + RandomString(DigitCaps,9))</imageurl>
		<posturl>http://perm.rt.ru/ajax/sms/send</posturl>
		<postdata>eval(
			var
				DT: TDatetime;
			begin
				DT:=SMS['DeliveryTime'];
				PostData.Add('phone_number',SMS['Phone']);
				PostData.Add('message_text',SMS['Text']);
				PostData.Add('message_text_trans','');
				PostData.Add('captcha', SMS['Code']);
				if SMS['Delivery'] then
				begin
					//var delta = d_date.getTime() - n_date.getTime() - ((240 + d_date.getTimezoneOffset()) * 60 * 1000);
					PostData.Add('delay_time','');
					PostData.Add('delay_send','1');
				end else
					PostData.Add('delay_send','');
				PostData.Add('region_id','28');
				PostData.Add('offset_time','-'+VarToStr(TimeZoneBias));
				PostData.Add('action','ins');
				PostData.Add('mode','insSms');
				PostData.Add('auto_trans','');
				PostData.Add('page','');
				PostData.Add('phone_number_list','');
				PostData.Add('subsc_pwd','');
			end;
		)
		</postdata>
		<success>eval(HTML.ExistsStr('&quot;result&quot;: &quot;0&quot;'))</success>
		<error>eval(
			var
				Code: string;
			begin
            	Code := Html.RegExp('&quot;result&quot;: &quot;(.*?)&quot;', 1);
            	if Code = '1' then
            		Result := 'Неверно указан код с картинки'
            	else if Code = '2' then
            		Result := 'Номер телефона указан в неверном формате'
            	else if Code = '3' then
            		Result := 'Сообщение не может быть отправлено на указанный номер'
            	else if Code = '4' then
            		Result := 'Сообщение не принято к отправке'
            	else if Code = '5' then
            		Result := 'Сообщение не может быть отправлено на указанный номер'
            	else if Code = '6' then
            		Result := 'Отправка сообщения невозможна. Абонент заблокировал прием SMS сообщений через WEB-сервис'
            	else if Code = '7' then
            		Result := 'Отправка SMS-сообщений возможна только абонентам мобильной связи Ростелеком'
            	else if Code = '8' then
            		Result := 'Сообщение не содержит текст';
            	if Result = '' then
            		Result:=Html.RegExp('&quot;errorMsg&quot;: &quot;(.*?)&quot;', 1);
            	if Result = '' then	
            		Result := 'Неизвестная ошибка';
            end;		
		)</error>
	</classprops>
</gate>