<?xml version="1.0" encoding="UTF-8"?>
<gate>
	<name>MTS</name>
	<caption>МТС</caption>
	<type>SMS</type>
	<class>HTTP</class>
	<version>52</version>
	<priority>10</priority>
	<country>Россия</country>
	<prefixlist>
		<prefix start="+7 90259"/>
		<prefix start="+7 90425"/>
		<prefix start="+7 910000" end="+7 911069"/>
		<prefix start="+7 911070" end="+7 911074" tag="2"/>
		<prefix start="+7 911075" end="+7 911449"/>
		<prefix start="+7 91145" end="+7 91149" tag="2"/>
		<prefix start="+7 91150" end="+7 91184"/>
		<prefix start="+7 91185" end="+7 91186" tag="2"/>
		<prefix start="+7 911870" end="+7 912065"/>
		<prefix start="+7 912068" end="+7 914014"/>
		<prefix start="+7 91402" end="+7 91404"/>
		<prefix start="+7 91405" tag="1"/>
		<prefix start="+7 91406" end="+7 91429"/>
		<prefix start="+7 91431" end="+7 91433"/>
		<prefix start="+7 91438" end="+7 91452"/>
		<prefix start="+7 914538"/>
		<prefix start="+7 91454" end="+7 91462"/>
		<prefix start="+7 91463" tag="1"/>
		<prefix start="+7 91464" end="+7 91479"/>
		<prefix start="+7 91481"/>
		<prefix start="+7 91483" tag="1"/>
		<prefix start="+7 91484" end="+7 91497"/>
		<prefix start="+7 91498" tag="1"/>
		<prefix start="+7 915000" end="+7 919136"/>
		<prefix start="+7 919139" end="+7 919411"/>
		<prefix start="+7 91942" end="+7 91977"/>
		<prefix start="+7 919780"/>
		<prefix start="+7 919784"/>
		<prefix start="+7 919786"/>
		<prefix start="+7 919790" end="+7 919970"/>
		<prefix start="+7 91998" end="+7 91999"/>
		<prefix start="+7 95095"/>
		<prefix start="+7 980250" end="+7 980253"/>
		<prefix start="+7 98030" end="+7 98037"/>
		<prefix start="+7 980500" end="+7 980504"/>
		<prefix start="+7 980510" end="+7 980514"/>
		<prefix start="+7 98052"/>
		<prefix start="+7 98054"/>
		<prefix start="+7 98063"/>
		<prefix start="+7 980640" end="+7 980644"/>
		<prefix start="+7 980650" end="+7 980664"/>
		<prefix start="+7 98067" end="+7 98068"/>
		<prefix start="+7 98075"/>
		<prefix start="+7 981440" end="+7 981444"/>
		<prefix start="+7 98145" tag="2"/>
		<prefix start="+7 98150"/>
		<prefix start="+7 981650" end="+7 981654"/>
		<prefix start="+7 9817"/>
		<prefix start="+7 98230" end="+7 98232"/>
		<prefix start="+7 98240" end="+7 98241"/>
		<prefix start="+7 98248" end="+7 98254"/>
		<prefix start="+7 98260" end="+7 98262"/>
		<prefix start="+7 98290"/>
		<prefix start="+7 98295"/>
		<prefix start="+7 98310" end="+7 98334"/>
		<prefix start="+7 98340" end="+7 98341"/>
		<prefix start="+7 98342" end="+7 98343" tag="1"/>
		<prefix start="+7 98410" end="+7 98411"/>
		<prefix start="+7 985"/>
		<prefix start="+7 98723" end="+7 98733"/>
		<prefix start="+7 98734" end="+7 98739"/>
		<prefix start="+7 98759" end="+7 98766"/>
		<prefix start="+7 987670" end="+7 987684"/>
		<prefix start="+7 98769" end="+7 98771"/>
		<prefix start="+7 98782" end="+7 98789"/>
		<prefix start="+7 98791" end="+7 98797"/>
		<prefix start="+7 98799"/>
		<prefix start="+7 98814" end="+7 98818"/>
		<prefix start="+7 988200" end="+7 988473"/>
		<prefix start="+7 988486"/>
		<prefix start="+7 98849" end="+7 98851"/>
		<prefix start="+7 988523"/>
		<prefix start="+7 98853" end="+7 98854"/>
		<prefix start="+7 988557"/>
		<prefix start="+7 988560" end="+7 988600"/>
		<prefix start="+7 988602"/>
		<prefix start="+7 988605" end="+7 988619"/>
		<prefix start="+7 988622"/>
		<prefix start="+7 988630" end="+7 988655"/>
		<prefix start="+7 988665" end="+7 988666"/>
		<prefix start="+7 988674"/>
		<prefix start="+7 98868" end="+7 98875"/>
		<prefix start="+7 988762"/>
		<prefix start="+7 988765"/>
		<prefix start="+7 988769" end="+7 988799"/>
		<prefix start="+7 98880" end="+7 98899"/>
		<prefix start="+7 98995"/>
		
		<prefix start="+7 495 101" end="+7 495 108"/>
		<prefix start="+7 495 139"/>
		<prefix start="+7 495 231"/>
		<prefix start="+7 495 233"/>
		<prefix start="+7 495 25802" end="+7 495 25803"/>
		<prefix start="+7 495 364"/>
		<prefix start="+7 495 410" end="+7 495 411"/>
		<prefix start="+7 495 76"/>
		<prefix start="+7 495 773" end="+7 495 776"/>
		<prefix start="+7 495 784" end="+7 495 786"/>
		<prefix start="+7 495 913 0" end="+7 495 913 1"/>
		<prefix start="+7 495 920" end="+7 495 922"/>
		<prefix start="+7 495 960 0" end="+7 495 960 0"/>
		<prefix start="+7 495 960 4" end="+7 495 960 4"/>
		<prefix start="+7 495 967 2" end="+7 495 967 2"/>
		<prefix start="+7 495 967 4" end="+7 495 967 5"/>
		<prefix start="+7 495 969 65" end="+7 495 969 99"/>
		<prefix start="+7 495 970"/>
		<prefix start="+7 495 991"/>
		<prefix start="+7 495 997" end="+7 495 999"/>

		<prefix start="+7 812 92"/>
	</prefixlist>
	<info>
		<maxsymbols>140</maxsymbols>
		<maxunicodesymbols>50</maxunicodesymbols>
		<supportflash>1</supportflash>
		<supportdtdelivery>1</supportdtdelivery>
		<supportunicode>1</supportunicode>
		<supportcheckdelivery>1</supportcheckdelivery>
		<captcha>1</captcha>
		<gateurl>http://www.mts.ru/messaging/sendsms/</gateurl>
	</info>
	<classprops>
		<encoding>UTF-8</encoding>
		<handleredirects>0</handleredirects>
		<sendinit>eval(begin HTTP.Protocol:='1.0'; end;)</sendinit>
		<pageurl>eval(
					begin
						if SMS['Phone_tag']=1 then
						begin
							Stored['imageurl']:='http://sms.buryatia.mts.ru/';
							Stored['siteurl']:='http://sms.buryatia.mts.ru/';
							Stored['regions']:='Бурятия (Республика Бурятия) — Улан-Удэ';
							Stored['timeadd']:=-4;
							Stored['method']:=1;
						end	
						else if SMS['Phone_tag']=2 then
						begin
							Stored['imageurl']:='http://sms.kaliningrad.mts.ru/';
							Stored['siteurl']:='http://sms.kaliningrad.mts.ru/';
							Stored['regions']:='Калининград';
							Stored['timeadd']:=2;
							Stored['method']:=1;
						end	
						else
						begin
							Stored['siteurl']:='http://www.mts.ru/live/smsxtra.aspx?region=msk';
							Stored['imageurl']:='http://www.mts.ru/live/';
							Stored['timeadd']:=0;
							Stored['method']:=0;
						end;
						Result:=Stored['siteurl'];
					end;
					)
		</pageurl>
		<imageurl>eval(begin
						//Cookies['region.alias']:='msk';
						Result:=Stored['imageurl'] + HTML.RegExp('(LanapCaptcha.aspx.*?)''',1);
						end;
		)</imageurl>
		<posturl>eval(Stored['siteurl'])</posturl>
		<postdata>eval(
					var
						DT: TDateTime;
						PhoneDef: string;
					begin
						DT:=SMS['DeliveryTime'];
						if SMS['Delivery'] then
						begin	
							if (DT-Now)&lt;5*OneMinute then
							begin
								DT:=DT+5*OneMinute;
							end;	
						end;
						DT:=AdjustTimeZone(DT,180,true);
						if not SMS['Delivery'] then
							DT:=DT+Stored['timeadd']*OneHour;
						if SMS['Phone_Def']='495' then
							PhoneDef:='985'
						else PhoneDef:=SMS['Phone_Def'];
						//Cookies['region.alias']:='msk';	

						if Stored['method']=1 then
						begin
							Stored['captchanewkey']:=Html.RegExp('LBD_VCT_live_smssending_ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_smssendingcontrol_captchanew&quot; value=&quot;(.*?)&quot;',1);
							Stored['ViewState']:=Html.RegExp('id=&quot;__VIEWSTATE&quot; value=&quot;(.*?)&quot;',1);
							//Stored['EventValidation']:=Html.RegExp('id=&quot;__EVENTVALIDATION&quot; value=&quot;(.*?)&quot;',1);
							PostData.Add('ctl00$ctl03$ctl00$scriptManagerId','ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$updatePanelPanel|ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$btnSend');
							PostData.Add('ctl00_ctl03_ctl00_scriptManagerId_TSM',';;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35:ru:d0c4ca6e-6b5d-49b6-922d-5244924fb100:ea597d4b:b25378d2;Telerik.Web.UI, Version=2010.1.415.20, Culture=neutral, PublicKeyToken=121fae78165ba3d4:ru:9821e2fb-2395-49a7-8336-e4110f37db7d:16e4e7cd:86526ba7:f7645509:24ee1bba:1e771326:aa288e2d:ed16cbdc;');
							PostData.Add('ctl00_ctl03_ctl00_RadFormDecorator1_ClientState','');
							PostData.Add('ctl00$ctl03$ctl00$ctl02$ctl00$ctl00$ctl01$rcbRegions',Stored['regions']);
							//PostData.Add('ctl00_ctl03_ctl00_ctl02_ctl00_ctl00_ctl01_rcbRegions_ClientState','{"logEntries":[],"value":"http://www.kaliningrad.mts.ru/","text":"РљР°Р»РёРЅРёРЅРіСЂР°РґСЃРєР°СЏ РѕР±Р»Р°СЃС‚СЊ","enabled":true}');
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_RadFormDecorator1_ClientState','');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ddPrefix',SMS['Phone_Def']);
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ddPrefix_ClientState','{"logEntries":[],"value":"911","text":"911","enabled":true}');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$tbPhoneNumber',SMS['Phone_Number']);
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$tbMessage',SMS['Text']);
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$tbCode',SMS['Code']);
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$chbForCalendar','on');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl01',FormatDateTime('dd',DT));
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ctl01_ClientState','{"logEntries":[],"value":"29","text":"29","enabled":false}');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl02',GetMonthLongRus(DT,false,true));
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ctl02_ClientState','{"logEntries":[],"value":"8","text":"РђРІРіСѓСЃС‚","enabled":false}');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl03',FormatDateTime('yyyy',DT));
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ctl03_ClientState','{"logEntries":[],"value":"2010","text":"2010","enabled":false}');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl04',FormatDateTime('hh',DT));
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ctl04_ClientState','{"logEntries":[],"value":"14","text":"14","enabled":false}');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl06',FormatDateTime('nn',DT));
							//PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_ctl06_ClientState','{"logEntries":[],"value":"44","text":"44","enabled":false}');
							PostData.Add('__EVENTTARGET','');
							PostData.Add('__EVENTARGUMENT','');
							PostData.Add('__VIEWSTATE',Stored['ViewState']);
							PostData.Add('LBD_VCT_live_smssending_ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_smssendingcontrol_captchanew',Stored['captchanewkey']);
							PostData.Add('__ASYNCPOST','true');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$btnSend.x','149');
							PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$btnSend.y','10');
							PostData.Add('RadAJAXControlID','ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_updatePanel');
						
						end else
						begin
							Stored['Hidden']:=DecodeFormElem(Html.RegExp('_TSM_CombinedScripts_=(.*?)&quot; type',1));
							Stored['captchanewkey']:=Html.RegExp('id=&quot;LBD_VCT_live_smsxtra_ctl00_ctl00_ctl00_smssendcontrol_captchanew&quot; value=&quot;(.*?)&quot;',1);
							Stored['ViewState']:=Html.RegExp('id=&quot;__VIEWSTATE&quot; value=&quot;(.*?)&quot;',1);
							Stored['EventValidation']:=Html.RegExp('id=&quot;__EVENTVALIDATION&quot; value=&quot;(.*?)&quot;',1);
							
							//PostData.UnsafeFormName:=URLSpecialChar+'$';
							//PostData.UnsafeFormElem:=URLFullSpecialChar+URLSpecialChar+',$+ /';
							PostData.Add('ctl00$ctl00$ctl00$RadScriptManager1','ctl00$ctl00$ctl00$SMSSendControl$ctl00$ctl00$ctl00$SMSSendControl$updatePanelPanel|ctl00$ctl00$ctl00$SMSSendControl$btnSend');
							PostData.Add('ctl00_ctl00_ctl00_RadScriptManager1_TSM',Stored['Hidden']);
							PostData.Add('__EVENTTARGET','');
							PostData.Add('__EVENTARGUMENT','');
							PostData.Add('LBD_VCT_live_smsxtra_ctl00_ctl00_ctl00_smssendcontrol_captchanew',Stored['captchanewkey']);
							PostData.Add('__VIEWSTATE',Stored['ViewState']);
							PostData.Add('__EVENTVALIDATION',Stored['EventValidation']);
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_RadFormDecorator1_ClientState','');

							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ddPrefix',PhoneDef);
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ddPrefix_ClientState','');
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ddPrefix_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+PhoneDef+'&quot;,&quot;text&quot;:&quot;'+PhoneDef+'&quot;,&quot;enabled&quot;:true}');

							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$tbPhoneNumber',SMS['Phone_Number']);
							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$tbMessage',SMS['Text']);
							if SMS['Flash'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$chbFlashSMS','on');
							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$tbCode',SMS['Code']);
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$chbForCalendar','on');
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ctl01',FormatDateTime('dd',DT));
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ctl01_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+FormatDateTime('d',DT)+'&quot;,&quot;text&quot;:&quot;'+FormatDateTime('d',DT)+'&quot;,&quot;enabled&quot;:false}');
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ctl02',GetMonthLongRus(DT,false,true));
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ctl02_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+FormatDateTime('m',DT)+'&quot;,&quot;text&quot;:&quot;'+GetMonthLongRus(DT,false,true)+'&quot;,&quot;enabled&quot;:false}');
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ctl03',FormatDateTime('yyyy',DT));
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ctl03_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+FormatDateTime('yyyy',DT)+'&quot;,&quot;text&quot;:&quot;'+FormatDateTime('yyyy',DT)+'&quot;,&quot;enabled&quot;:false}');
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ctl04',FormatDateTime('hh',DT));
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ctl04_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+FormatDateTime('h',DT)+'&quot;,&quot;text&quot;:&quot;'+FormatDateTime('h',DT)+'&quot;,&quot;enabled&quot;:false}');
							if SMS['Delivery'] then
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$ctl06',FormatDateTime('nn',DT));
							PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_ctl06_ClientState','{&quot;logEntries&quot;:[],&quot;value&quot;:&quot;'+FormatDateTime('n',DT)+'&quot;,&quot;text&quot;:&quot;'+FormatDateTime('n',DT)+'&quot;,&quot;enabled&quot;:false}');

							PostData.Add('__ASYNCPOST','true');
							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$btnSend.x','72');
							PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$btnSend.y','18');
							PostData.Add('RadAJAXControlID','ctl00_ctl00_ctl00_SMSSendControl_updatePanel');
						end;	

					end;
					)
		</postdata>
		<success>eval(HTML.RegExp('Проверить статус доставки',0))</success>
		<error>eval(begin
						if HTML.ExistsStr('smsExtraRedirect.htm') then
							Result:='SMS-сообщение можно отправлять не чаще одного раза в 30 секунд'
						else 	
							Result:=HTML.RegExp('class=&quot;ERROR&quot;&gt;(.*?)&lt;/span&gt;',1);
						if (Result='') and (Html.ExistsStr('ctl00_ctl00_ctl00_SMSSendControl_pnlForm')) then
							Result:='Превышение лимита отправки, попробуйте позже';
					end;		
							
					)
		</error>
		<cd_method>POST</cd_method>
		<cd_posturl>eval(Stored['siteurl'])</cd_posturl>
		<cd_postdata>eval(
						var
							Viewstate: string;
							Eventvalid: string;
						begin
							Viewstate:=Html.RegExp('__VIEWSTATE\|(.*?)\|',1);
							Eventvalid:=Html.RegExp('__EVENTVALIDATION\|(.*?)\|',1);


							if Stored['method']=1 then
							begin
								PostData.Add('ctl00$ctl03$ctl00$scriptManagerId','ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$updatePanelPanel|ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$lbCheckMessageStatus');
								PostData.Add('ctl00_ctl03_ctl00_scriptManagerId_TSM',';;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35:ru:d0c4ca6e-6b5d-49b6-922d-5244924fb100:ea597d4b:b25378d2;Telerik.Web.UI, Version=2010.1.415.20, Culture=neutral, PublicKeyToken=121fae78165ba3d4:ru:9821e2fb-2395-49a7-8336-e4110f37db7d:16e4e7cd:86526ba7:f7645509:24ee1bba:1e771326:aa288e2d:ed16cbdc;');
								PostData.Add('ctl00_ctl03_ctl00_RadFormDecorator1_ClientState','');
								PostData.Add('ctl00$ctl03$ctl00$ctl02$ctl00$ctl00$ctl01$rcbRegions',Stored['regions']);
								PostData.Add('ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_RadFormDecorator1_ClientState','');
								PostData.Add('ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$hfMessageID',Html.RegExp('id=&quot;ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_hfMessageID&quot; value=&quot;(.*?)&quot;',1));
								PostData.Add('__EVENTTARGET','ctl00$ctl03$ctl00$ctl03$ctl00$ctl00$ctl00$ctl00$ctl01$ctl00$ctl01$ctl00$SmsSendingControl$lbCheckMessageStatus');
								PostData.Add('__EVENTARGUMENT','');
								PostData.Add('__VIEWSTATE',Viewstate);
								PostData.Add('LBD_VCT_live_smssending_ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_smssendingcontrol_captchanew',Stored['captchanewkey']);
								PostData.Add('__ASYNCPOST','true');
								PostData.Add('RadAJAXControlID','ctl00_ctl03_ctl00_ctl03_ctl00_ctl00_ctl00_ctl00_ctl01_ctl00_ctl01_ctl00_SmsSendingControl_updatePanel');
							end else
							begin
								PostData.Add('ctl00$ctl00$ctl00$RadScriptManager1','ctl00$ctl00$ctl00$SMSSendControl$ctl00$ctl00$ctl00$SMSSendControl$updatePanelPanel|ctl00$ctl00$ctl00$SMSSendControl$lbCheckMessageStatus');
								PostData.Add('ctl00_ctl00_ctl00_RadScriptManager1_TSM',';;System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35:ru-RU:d0c4ca6e-6b5d-49b6-922d-5244924fb100:ea597d4b:b25378d2;Telerik.Web.UI, Version=2010.1.415.20, Culture=neutral, PublicKeyToken=121fae78165ba3d4:ru-RU:9821e2fb-2395-49a7-8336-e4110f37db7d:16e4e7cd:86526ba7:ed16cbdc:f7645509:24ee1bba:1e771326:aa288e2d;');
								PostData.Add('LBD_VCT_live_smsxtra_ctl00_ctl00_ctl00_smssendcontrol_captchanew',Stored['captchanewkey']);
								PostData.Add('ctl00_ctl00_ctl00_SMSSendControl_RadFormDecorator1_ClientState','');
								PostData.Add('ctl00$ctl00$ctl00$SMSSendControl$hfMessageID',Html.RegExp('id=&quot;ctl00_ctl00_ctl00_SMSSendControl_hfMessageID&quot; value=&quot;(.*?)&quot;',1));
								PostData.Add('__EVENTTARGET','ctl00$ctl00$ctl00$SMSSendControl$lbCheckMessageStatus');
								PostData.Add('__EVENTARGUMENT','');
								PostData.Add('__VIEWSTATE',Viewstate);
								PostData.Add('__EVENTVALIDATION',Eventvalid);
								PostData.Add('__ASYNCPOST','true');
								PostData.Add('RadAJAXControlID','ctl00_ctl00_ctl00_SMSSendControl_updatePanel');
							end;	
						end;
						)
		</cd_postdata>				
		<cd_success>eval(
							begin
								if HTML.ExistsStr('Сообщение находится в очереди') or
									HTML.ExistsStr('ожидаем') then
									Result:='WAIT'
								else Result:=HTML.ExistsStr('Сообщение отправлено');	
							end;
						)
		</cd_success>
		<cd_error>eval(
						begin
							Result:=HTML.RegExp('cтатус сообщения:&lt;b/&gt;(.*?)&lt;b/&gt;',1);
							if Result='' then
								Result:=HTML.RegExp('style=&quot;color:Red;&quot;&gt;(.*?)&lt;/span&gt;',1);
							if Result='' then
								Result:=Html.RegExp('&lt;span id=&quot;ctl00_ctl00_ctl00_SMSSendControl_ResultId&quot; class=&quot;left_align&quot;&gt;&lt;b/&gt;(.*?)&lt;b/&gt;',1);
							if Result='' then
								Result:=Html.RegExp('=&quot;color:Red;font-weight:bold;&quot;&gt;(.*?)&lt;/span&gt;',1);
							if Result='' then
								Result:='Ошибка подтверждения доставки';
						end;
						)
		</cd_error>
	</classprops>
</gate>